# Pathfinder 北京地铁路径规划问题

![Pathfinder](Pathfinder.png)

## 版权&免责声明

本项目使用MIT LICENSE许可证, 允许开发者自由分发, 复制等其他行为, 基于本项目的再开发项目需要包含本项目的原始MIT LICENSE, 一切基于本项目的再开发/使用项目的产生的后果均不由本项目作者承担

Copyright (c) 2025 xhdlphzr

特殊补充声明: 对于文件中copyright和LICENSE有冲突请以文件为准, 未注明的以LICENSE文件为准, 部分数据来源在README.md中提到了, 以README.md为准

## 工程描述

针对于北京地铁线路的路径规划问题

## 工程实现

### 数据采集 (工程难点)

#### 邻接矩阵

`./data/line.json`和`./data/station.json`的站点和线路的信息部分是通过 AI 工具获得数据部分是高德地图API, 其中坐标信息是高德地图API获取的, 通过人工对比北京地铁线路图来检查, id信息是通过递增注册的方式来写的

`beijing_subway_map.geojson`是展示作用, copyright: The data included in this document is from www.openstreetmap.org. The data is made available under ODbL.

#### 时段速度

据估算, 将高峰时段 (7 a.m. to 9 a.m. and 17 p.m. to 19 p.m.) 的时段速度设置为`35000m/h`, 将除外的平常时段的时段速度设置为`45000m/h`

#### 换乘惩罚因子

- 普通换乘步行: 2-3分钟
- 找路, 上下楼: 1-2分钟
- 心理压力: 1-2分钟

总计 ≈ 5分钟

标准值设定为5分钟, 高峰时期设定为7分钟

### 算法实现 (核心创新)

基于传统`A*`算法 (即`BFS启发式搜索`) 的基础上, 使用有权图的方式, 用`总代价 = 行驶路程 / 时段速度 + 换乘惩罚因子`作为权值, 进行实现

补充说明: 对于特殊值可以为不同时段和路线设置不同的拥挤度附加和换乘惩罚附加 (工程难点)

创新说明: 换乘惩罚因子是我们结合心理和实际估算出来的一个值子

#### 为什么使用`A*`算法

诚然, `dijkstra`简单, 易实现, 但是对于`A*`算法, 效率更高, 并且适合此类权值在变的图

在学习`A*`算法过程中, 我想过一个问题: 为什么`A*`算法效率高? 经过深入学习后我发现: `贪心`算法是只看H值, 未必正确, `dijkstra`算法是只看G值, 比较麻烦, 而`A*`又看G值, 又看H值, 将理想和现实相结合, 既保证效率高, 也保证结果对, 并且当H是常数时, 就退化成`dijkstra`了

### 代码实现

整体使用`python`实现, 细节如下:

1. 调用`json`库以读取数据
2. 使用`A*`算法完成代码
3. 使用`datetime`库获取时间, `tkinter`完成GUI制作

## 工程日志

`2025.10.18` 共获取北京地铁401个站的经纬度, 拓扑关系数据 (见`./data/line.json`和`./data/station.json`), 虽然缺少一些地铁站, 但在本次路径规划问题中已经完全够用了 `xhdlphzr`

`2025.10.18` 获得graph邻接矩阵 (见`./source/generate.py`)

`2025.10.19` 确定全部数据 `xhdlphzr`

`2025.10.19` `A*`算法框架完成 `xhdlphzr`

`2025.10.19` CLI版本顺利写出 `xhdlphzr`